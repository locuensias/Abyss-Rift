<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estado Server Minecraft</title>
    <style>
        body { font-family: sans-serif; background: #111; color: white; text-align: center; padding-top: 50px; }
        .box { border: 2px solid #333; display: inline-block; padding: 40px; border-radius: 20px; background: #222; }
        
        /* Círculos de estado */
        .dot { height: 25px; width: 25px; background: #555; border-radius: 50%; display: inline-block; vertical-align: middle; margin-right: 10px;}
        .on { background: #0f0; box-shadow: 0 0 20px #0f0; }
        .boot { background: #ff0; animation: latido 1s infinite; }
        .off { background: #f00; }
        
        @keyframes latido { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
        
        h1 { margin: 0 0 20px 0; font-size: 24px; color: #ddd; }
        .data { font-size: 18px; margin: 10px 0; border-bottom: 1px solid #444; padding-bottom: 5px; }
        .ip { margin-top: 30px; font-family: monospace; background: #000; padding: 10px; border-radius: 5px; color: #0ff; font-size: 16px; }
    </style>
</head>
<body>

    <div class="box">
        <h1>ESTADO DEL SERVIDOR</h1>
        
        <div style="font-size: 30px; margin-bottom: 30px;">
            <span id="dot" class="dot off"></span>
            <span id="txt">DESCONECTADO</span>
        </div>

        <div class="data">Jugadores: <b id="jug">-</b></div>
        <div class="data">Batería Host: <b id="bat">-</b></div>

        <div class="ip">IP: 201.188.96.213:25565</div>
        <p style="font-size: 12px; color: #666; margin-top: 20px;">
            Si está en ROJO, usa el comando de PowerShell para encenderlo.
        </p>
    </div>

    <script>
        // CONEXIÓN DIRECTA (Sin túneles, sin serveo, pura fibra)
        const API = "http://201.188.96.213:5000";

        async function check() {
            const dot = document.getElementById('dot');
            const txt = document.getElementById('txt');
            
            try {
                // Intentamos conectar directo a tu casa
                const res = await fetch(API + "/status");
                const data = await res.json();

                document.getElementById('jug').innerText = data.jugadores;
                document.getElementById('bat').innerText = data.bateria;

                if (data.estado === "encendido") {
                    dot.className = "dot on"; txt.innerText = "ONLINE";
                } else if (data.estado === "encendiendo") {
                    dot.className = "dot boot"; txt.innerText = "INICIANDO...";
                } else {
                    dot.className = "dot off"; txt.innerText = "APAGADO (OFF)";
                }
            } catch (e) {
                // Si falla es porque tu PC está apagado o el script de python cerrado
                dot.className = "dot off"; 
                txt.innerText = "OFFLINE";
                document.getElementById('jug').innerText = "-";
                document.getElementById('bat').innerText = "-";
            }
        }

        setInterval(check, 3000); // Revisa cada 3 segundos
        check();
    </script>
</body>
</html>
